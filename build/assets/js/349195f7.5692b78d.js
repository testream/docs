"use strict";(globalThis.webpackChunktestream_docs=globalThis.webpackChunktestream_docs||[]).push([[203],{5721(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"reporters/playwright","title":"Playwright Reporter","description":"The Testream Playwright Reporter automatically generates CTRF reports and uploads test results and artifacts to Testream.","source":"@site/docs/reporters/playwright.md","sourceDirName":"reporters","slug":"/reporters/playwright","permalink":"/docs/reporters/playwright","draft":false,"unlisted":false,"editUrl":"https://github.com/testream/docs/tree/main/docs/reporters/playwright.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/docs/getting-started/configuration"},"next":{"title":".NET Reporter","permalink":"/docs/reporters/dotnet"}}');var i=r(4848),s=r(8453);const l={sidebar_position:1},o="Playwright Reporter",a={},d=[{value:"Installation",id:"installation",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Required Options",id:"required-options",level:3},{value:"Optional Options",id:"optional-options",level:3},{value:"Complete Example",id:"complete-example",level:2},{value:"Artifact Uploads",id:"artifact-uploads",level:2},{value:"Supported Artifact Types",id:"supported-artifact-types",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Customizing Artifact Locations",id:"customizing-artifact-locations",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Local Development",id:"local-development",level:3},{value:"GitHub Actions",id:"github-actions",level:3},{value:"Running Tests",id:"running-tests",level:2},{value:"CTRF Report Format",id:"ctrf-report-format",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Tests run but no upload happens",id:"tests-run-but-no-upload-happens",level:3},{value:"Artifacts not uploading",id:"artifacts-not-uploading",level:3},{value:"Authentication errors",id:"authentication-errors",level:3},{value:"Network errors",id:"network-errors",level:3},{value:"Advanced Usage",id:"advanced-usage",level:2},{value:"Conditional Upload (CI only)",id:"conditional-upload-ci-only",level:3},{value:"Multiple Environments",id:"multiple-environments",level:3},{value:"Disable Artifacts for Faster Uploads",id:"disable-artifacts-for-faster-uploads",level:3},{value:"NPM Package",id:"npm-package",level:2},{value:"What&#39;s Next?",id:"whats-next",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"playwright-reporter",children:"Playwright Reporter"})}),"\n",(0,i.jsx)(n.p,{children:"The Testream Playwright Reporter automatically generates CTRF reports and uploads test results and artifacts to Testream."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev @testream/playwright-reporter\n"})}),"\n",(0,i.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Add the reporter to your ",(0,i.jsx)(n.code,{children:"playwright.config.ts"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",metastring:'title="playwright.config.ts"',children:"import { defineConfig } from '@playwright/test';\n\nexport default defineConfig({\n  reporter: [\n    ['@testream/playwright-reporter', {\n      upload: true,\n      apiKey: process.env.TESTREAM_API_KEY,\n    }],\n    ['html'], // Keep other reporters\n  ],\n\n  // Your test configuration...\n  testDir: './tests',\n  use: {\n    screenshot: 'only-on-failure',\n    video: 'retain-on-failure',\n    trace: 'retain-on-failure',\n  },\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsx)(n.h3,{id:"required-options",children:"Required Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"apiKey"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Your Testream API key (use environment variable)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"upload"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsxs)(n.td,{children:["Set to ",(0,i.jsx)(n.code,{children:"true"})," to enable uploads"]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"optional-options",children:"Optional Options"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Option"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"apiUrl"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"(backend default)"}),(0,i.jsx)(n.td,{children:"Override API endpoint URL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"outputFile"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"'ctrf-report.json'"})}),(0,i.jsx)(n.td,{children:"Path to save CTRF report file"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uploadArtifacts"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Upload screenshots, videos, and traces"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"minimal"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"Minimal console output"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"printSummary"})}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsx)(n.td,{children:"Print test summary at the end"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"complete-example",children:"Complete Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",metastring:'title="playwright.config.ts"',children:"import { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n\n  reporter: [\n    // Testream reporter with all options\n    ['@testream/playwright-reporter', {\n      // Upload configuration\n      upload: true,\n      apiKey: process.env.TESTREAM_API_KEY,\n      apiUrl: process.env.TESTREAM_API_URL,\n\n      // Report configuration\n      outputFile: 'test-results/ctrf-report.json',\n      uploadArtifacts: true,\n\n      // Console output\n      minimal: false,\n      printSummary: true,\n    }],\n\n    // Other reporters\n    ['html', { outputFolder: 'playwright-report' }],\n    ['list'],\n  ],\n\n  use: {\n    baseURL: 'http://127.0.0.1:3000',\n    trace: 'retain-on-failure',\n    screenshot: 'only-on-failure',\n    video: 'retain-on-failure',\n  },\n\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.h2,{id:"artifact-uploads",children:"Artifact Uploads"}),"\n",(0,i.jsxs)(n.p,{children:["The reporter automatically uploads test artifacts when ",(0,i.jsx)(n.code,{children:"uploadArtifacts: true"}),":"]}),"\n",(0,i.jsx)(n.h3,{id:"supported-artifact-types",children:"Supported Artifact Types"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Screenshots"})," (",(0,i.jsx)(n.code,{children:".png"}),", ",(0,i.jsx)(n.code,{children:".jpg"}),", ",(0,i.jsx)(n.code,{children:".jpeg"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Videos"})," (",(0,i.jsx)(n.code,{children:".webm"}),", ",(0,i.jsx)(n.code,{children:".mp4"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Traces"})," (",(0,i.jsx)(n.code,{children:".zip"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Run tests with artifact capture enabled:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"use: {\n  screenshot: 'only-on-failure',\n  video: 'retain-on-failure',\n  trace: 'retain-on-failure',\n}\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Playwright saves artifacts to ",(0,i.jsx)(n.code,{children:"test-results/"})," directory"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The reporter automatically discovers and uploads artifacts"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"View artifacts in Testream dashboard"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"customizing-artifact-locations",children:"Customizing Artifact Locations"}),"\n",(0,i.jsx)(n.p,{children:"If you use custom output directories:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"use: {\n  screenshot: 'only-on-failure',\n  video: 'retain-on-failure',\n},\noutputDir: 'custom-test-results',\n"})}),"\n",(0,i.jsx)(n.p,{children:"The reporter will automatically detect artifacts in your custom directory."}),"\n",(0,i.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,i.jsx)(n.h3,{id:"local-development",children:"Local Development"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'title=".env"',children:"TESTREAM_API_KEY=your_api_key_here\nTESTREAM_API_URL=https://api.testream.app  # Optional\n"})}),"\n",(0,i.jsx)(n.p,{children:"Load it in your config:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",metastring:'title="playwright.config.ts"',children:"import dotenv from 'dotenv';\ndotenv.config();\n\nexport default defineConfig({\n  reporter: [\n    ['@testream/playwright-reporter', {\n      upload: true,\n      apiKey: process.env.TESTREAM_API_KEY,\n    }],\n  ],\n});\n"})}),"\n",(0,i.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: Run Playwright tests\n  run: npx playwright test\n  env:\n    TESTREAM_API_KEY: ${{ secrets.TESTREAM_API_KEY }}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Make sure environment variables are set\nexport TESTREAM_API_KEY=your_api_key_here\n\n# Run all tests\nnpx playwright test\n\n# Run specific test file\nnpx playwright test tests/example.spec.ts\n\n# Run in headed mode\nnpx playwright test --headed\n\n# Run with specific browser\nnpx playwright test --project=chromium\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ctrf-report-format",children:"CTRF Report Format"}),"\n",(0,i.jsx)(n.p,{children:"The reporter generates a CTRF (Common Test Report Format) JSON file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="ctrf-report.json"',children:'{\n  "results": {\n    "tool": {\n      "name": "playwright"\n    },\n    "summary": {\n      "tests": 10,\n      "passed": 8,\n      "failed": 1,\n      "pending": 0,\n      "skipped": 1,\n      "other": 0,\n      "start": 1234567890,\n      "stop": 1234567900\n    },\n    "tests": [\n      {\n        "name": "should login successfully",\n        "status": "passed",\n        "duration": 1523\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"This format ensures compatibility with CTRF tools and services."}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"tests-run-but-no-upload-happens",children:"Tests run but no upload happens"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"upload: true"})," is set in reporter config"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"TESTREAM_API_KEY"})," environment variable is set"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 API key is valid (not expired)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Internet connection is available"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"artifacts-not-uploading",children:"Artifacts not uploading"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 ",(0,i.jsx)(n.code,{children:"uploadArtifacts: true"})," in reporter config"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Artifacts are actually being generated (check ",(0,i.jsx)(n.code,{children:"test-results/"})," folder)"]}),"\n",(0,i.jsxs)(n.li,{children:["\u2705 Test configuration includes ",(0,i.jsx)(n.code,{children:"screenshot"}),", ",(0,i.jsx)(n.code,{children:"video"}),", or ",(0,i.jsx)(n.code,{children:"trace"})," settings"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"authentication-errors",children:"Authentication errors"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Authentication failed - invalid API key\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Generate a new API key from ",(0,i.jsx)(n.a,{href:"https://testream.app",children:"testream.app"})]}),"\n",(0,i.jsxs)(n.li,{children:["Update ",(0,i.jsx)(n.code,{children:"TESTREAM_API_KEY"})," environment variable"]}),"\n",(0,i.jsx)(n.li,{children:"Verify no typos in the API key"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"network-errors",children:"Network errors"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error: Failed to upload - network error\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Check:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Internet connection"}),"\n",(0,i.jsx)(n.li,{children:"Firewall settings"}),"\n",(0,i.jsx)(n.li,{children:"Corporate proxy configuration"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"apiUrl"})," if using custom endpoint"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"advanced-usage",children:"Advanced Usage"}),"\n",(0,i.jsx)(n.h3,{id:"conditional-upload-ci-only",children:"Conditional Upload (CI only)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"reporter: [\n  ['@testream/playwright-reporter', {\n    upload: !!process.env.CI,  // Only upload in CI\n    apiKey: process.env.TESTREAM_API_KEY,\n  }],\n],\n"})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-environments",children:"Multiple Environments"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const isProduction = process.env.NODE_ENV === 'production';\n\nreporter: [\n  ['@testream/playwright-reporter', {\n    upload: true,\n    apiKey: isProduction\n      ? process.env.TESTREAM_PROD_API_KEY\n      : process.env.TESTREAM_DEV_API_KEY,\n    apiUrl: isProduction\n      ? 'https://api.testream.app'\n      : 'https://dev-api.testream.app',\n  }],\n],\n"})}),"\n",(0,i.jsx)(n.h3,{id:"disable-artifacts-for-faster-uploads",children:"Disable Artifacts for Faster Uploads"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"reporter: [\n  ['@testream/playwright-reporter', {\n    upload: true,\n    apiKey: process.env.TESTREAM_API_KEY,\n    uploadArtifacts: false,  // Faster uploads, no artifacts\n  }],\n],\n"})}),"\n",(0,i.jsx)(n.h2,{id:"npm-package",children:"NPM Package"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Package:"})," ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/@testream/playwright-reporter",children:"@testream/playwright-reporter"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Version:"})," 0.4.0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Repository:"})," ",(0,i.jsx)(n.a,{href:"https://github.com/hasanalituran/jira-test-manager",children:"GitHub"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Learn about ",(0,i.jsx)(n.a,{href:"./dotnet",children:".NET Reporter"})," for .NET projects"]}),"\n",(0,i.jsxs)(n.li,{children:["Set up ",(0,i.jsx)(n.a,{href:"../github-action/setup",children:"GitHub Action"})," for CI/CD"]}),"\n",(0,i.jsxs)(n.li,{children:["View results in ",(0,i.jsx)(n.a,{href:"../jira-integration/usage",children:"Jira"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>l,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);